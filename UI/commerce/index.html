<!--A Design by W3layouts
Author: W3layout
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE HTML>
<html>
<head>
    <title>Free Ecomm Template Website Template | Home :: w3layouts</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Ubuntu+Condensed' rel='stylesheet' type='text/css'>
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all"/>
    <script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
    <script src="js/jquery.openCarousel.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/easing.js"></script>
    <script type="text/javascript" src="js/move-top.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="./lib/elasticsearch-js/elasticsearch.jquery.js"></script>
    <script type="text/javascript">
        var giftCardQuery = '{"size":15,"sort":[{"discount":{"order":"desc"}}],"query":{"bool":{"must":[{"match":{"partnerId":35576}},{"range":{"discount":{"lte":20}}},{"range":{"price":{"gte":20}}}]}}}';
        var electronicQuery = '{"size":15,"sort":[{"discount":{"order":"desc"}}],"query":{"bool":{"must":[{"terms":{"categoryEnrichment.categoriesOnPath":[152,328,4745,502995,305,404]}},{"range":{"price":{"gte":100}}}],"must_not":[{"terms":{"cat1.catName":["USED"]}}]}}}';
        $(document).ready(loadPage(giftCardQuery));

        function loadGiftCardPage() {
            loadPage(giftCardQuery);
        }

        function loadElectronicPage() {
            loadPage(electronicQuery);
        }

        function shorten(text, maxLength) {
            var ret = text;

            if (ret != undefined && ret != null && ret.length > maxLength) {
                ret = ret.substring(0, maxLength - 3) + "...";
            }
            return ret;
        };

        function loadPage(query) {

            var client = new $.es.Client({
                //hosts: 'http://172.28.46.6:9200', //YT
                hosts: 'http://172.28.46.10:9200',  // zheng
                log: 'trace'
            });

            //console.log("test");

            client.ping({
                requestTimeout: 30000,
            }, function (error) {
                if (error) {
                    console.error('elasticsearch cluster is down!');
                } else {
                    //alert('elastic search works');
                    console.log("all is well");
                    loadTopDeals();

                    $.post('http://172.28.46.10:9200/product_data/product/_search',
                        query)
                        .done(function (fetchedData) {

                            //rucha(fetchedData);
                            ming(fetchedData);

                        });

                    // ====================== RUCHA START ==========================


                    function rucha(data) {
//                            alert( "Data Loaded: " + data );
                        console.log("debug for breakpoint");
                        document.getElementById("description1").innerHTML = data.hits.hits[0]._source.brand;
                        document.getElementById("image1").src = data.hits.hits[0]._source.bigimage;
                        document.getElementById("orig_price1").innerHTML = "<del> $" + data.hits.hits[0]._source.retailprice + "</del>";
                        document.getElementById("disc_price1").innerHTML = "$" + data.hits.hits[0]._source.price;
                        document.getElementById("description1").href = data.hits.hits[0]._source.producturl;
                        document.getElementById("image_redirect1").href = data.hits.hits[0]._source.producturl;
                        document.getElementById("moreinfo1").innerHTML = shorten(data.hits.hits[0]._source.description, 100);
                    };

                    // ====================== RUCHA END ==========================


                    // ====================== Yi START ==========================

                    // only yi can code here

                    // ====================== Yi END ==========================

                    // ====================== MING START ==========================

                    // only ming can code here
                    function ming(data) {

                        var step = 0;
                        for (; step < 12; step++) {

                            document.getElementById("description" + (step + 1)).innerHTML = data.hits.hits[step]._source.brand;
                            document.getElementById("image" + (step + 1)).src = data.hits.hits[step]._source.bigimage;
                            document.getElementById("orig_price" + (step + 1)).innerHTML = "<del> $" + data.hits.hits[step]._source.retailprice + "</del>";
                            document.getElementById("disc_price" + (step + 1)).innerHTML = "$" + data.hits.hits[step]._source.price;
                            document.getElementById("description" + (step + 1)).href = data.hits.hits[step]._source.producturl;
                            document.getElementById("image_redirect" + (step + 1)).href = data.hits.hits[step]._source.producturl;
                            document.getElementById("moreinfo" + (step + 1)).innerHTML = shorten(data.hits.hits[step]._source.name, 100);

                        }

                    }

                    // ====================== MING END ==========================

                    // ====================== YT START ==========================

                    // ====================== YT END ==========================

                    // ====================== YUANCHAO START ==========================

                    // ====================== YUANCHAO END ==========================

                    // ====================== ZHENG START ==========================

                    // ====================== ZHENG END ==========================

                    //  alert( "Data Loaded: " + data );
                    //$("description1").html(data.hits.hits[0]._source.brand);

                    console.log("debug log");

                }
            });


        }
    </script>


</head>
<body>
<div class="header">
    <div class="wrap">
        <div class="header_top">
            <div class="logo">
                <a href="index.html"><img src="images/criteologo.png" style="width:150px;height:40px;" alt=""/></a>
            </div>
            <div class="header_top_right">
            </div>
            <div class="clear"></div>
        </div>
        <div class="navigation">
            <a class="toggleMenu" href="#">Menu</a>
            <ul class="nav">
                <li>
                    <a href="index.html">Top Deals</a>
                </li>
                <li class="test">
                    <a href="#">Shoes</a>
                    <ul>
                        <li>
                            <a href="#">Cookware</a>
                            <ul>
                                <li><a href="#">Pots & Pans</a></li>
                                <li><a href="#">Pressure Cookers</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">Storage</a>
                            <ul>
                                <li><a href="#">Bottles & Sippers</a></li>
                                <li><a href="#">Containers & Jars</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">Cutlery & Tableware</a>
                            <ul>
                                <li><a href="#">Cutlery</a></li>
                                <li><a href="#">Condiment Sets</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">Bar Accessories</a>
                            <ul>
                                <li><a href="#">Bottle Openers</a></li>
                                <li><a href="#">Flasks</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#" onclick="event.preventDefault(); loadElectronicPage();">Electronics</a>
                </li>
                <li>
                    <a href="#">Jewelry</a>
                    <ul>
                        <li><a href="#">Bath & Skin Care</a></li>
                        <li><a href="#">Health & Safety</a></li>
                        <li><a href="#">Maternity Care</a></li>
                        <li><a href="#">Body Care Combos</a></li>

                    </ul>
                </li>
                <li>
                    <a href="#">Baby</a>
                    <ul>
                        <li>
                            <a href="#">Home Furnishing</a>
                            <ul>
                                <li><a href="#">Bed</a></li>
                                <li><a href="#">Bath</a></li>
                                <li><a href="#">Kitchen</a></li>
                                <li><a href="#">Living</a></li>

                            </ul>
                        </li>
                        <li>
                            <a href="#">Home Decor</a>
                            <ul>
                                <li><a href="#">Flowers & Plants</a></li>
                                <li><a href="#">Home Fragrances</a></li>
                                <li><a href="#">Spiritual Decor</a></li>
                                <li><a href="#">Wall Decor</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">Gardening Tools</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">Clothes</a>
                    <ul>
                        <li>
                            <a href="#">Books</a>
                            <ul>
                                <li><a href="#">Academic & Professional</a></li>
                                <li><a href="#">Entrance Exam</a></li>
                                <li><a href="#">Literature & Fiction</a></li>
                                <li><a href="#">Children & Teens</a></li>
                                <li><a href="#">Indian Writing</a></li>
                                <li><a href="#">New Releases</a></li>
                                <li><a href="#">Bestsellers</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">Stationery</a>
                            <ul>
                                <li><a href="#">Pens</a></li>
                                <li><a href="#">Calculators</a></li>
                                <li><a href="#">College Supplies</a></li>
                                <li><a href="#">Art Supplies</a></li>
                                <li><a href="#">Diaries & Notebooks</a></li>
                                <li><a href="#">Gifting</a></li>
                            </ul>
                        </li>

                    </ul>
                </li>
                <li>
                    <a href="#" onclick="event.preventDefault(); loadGiftCardPage();">Gift Card</a>
                </li>
                <li>
                    <a href="contact.html">Login</a>
                </li>
            </ul>
            <span class="left-ribbon"> </span>
            <span class="right-ribbon"> </span>
        </div>
    </div>
</div>
<!------------End Header ------------>
<div class="main">
    <div class="content">
        <div class="content_bottom">
            <div class="wrap">
                <div class="content-bottom-left">
                    <div class="categories">
                        <ul>
                            <h3>Top Deal Partners</h3>
                            <li><a href="#" onclick="event.preventDefault(); "><img src=images/images/macys.png></a>
                            </li>
                            <li><a href="#" onclick="event.preventDefault(); "><img src=images/images/JCpenney.png></a>
                            </li>
                            <li><a href="#" onclick="event.preventDefault(); "><img src=images/images/newegg.png></a>
                            </li>
                            <li><a href="#" onclick="event.preventDefault(); "><img src=images/images/bandh.png></a>
                            </li>
                            <li><a href="#" onclick="event.preventDefault(); "><img
                                    src=images/images/freepeople.png></a></li>
                            <li><a href="#" onclick="event.preventDefault(); "><img src=images/images/stihl.png></a>
                            </li>
                            <li><a href="#" onclick="event.preventDefault(); "><img
                                    src=images/images/sunglasshut.png></a></li>
                            <li><a href="#" onclick="event.preventDefault(); "><img
                                    src=images/images/vividseats.png></a></li>

                        </ul>
                    </div>
                    <div class="buters-guide">
                        <h3>Buyers Guide</h3>
                        <p><span>We want you to be happy with your purchase.</span></p>
                        <p>So we're committed to giving you all the tools to make the right decision with minimum
                            fuss. </p>
                    </div>
                    <div class="add-banner">
                        <img src="images/camera.png" alt=""/>
                        <div class="banner-desc">
                            <h4>Electronics</h4>
                            <a href="#">More Info</a>
                        </div>
                        <div class="clear"></div>
                    </div>
                    <div class="add-banner add-banner2">
                        <img src="images/computer.png" alt=""/>
                        <div class="banner-desc">
                            <h4>Computers</h4>
                            <a href="#">More Info</a>
                        </div>
                        <div class="clear"></div>
                    </div>
                </div>

                <div class="content-bottom-right">
                    <h3>Browse All Categories</h3>
                    <div class="section group">
                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description1"></a></h4>
                            <a href="preview.html" id="image_redirect1"><img src="" alt="" id="image1"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price1"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price1"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo1"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>


                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description2"></a></h4>
                            <a href="preview.html" id="image_redirect2"><img src="" alt="" id="image2"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price2"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price2"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo2"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>

                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description3"></a></h4>
                            <a href="preview.html" id="image_redirect3"><img src="" alt="" id="image3"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price3"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price3"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo3"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>

                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description4"></a></h4>
                            <a href="preview.html" id="image_redirect4"><img src="" alt="" id="image4"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price4"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price4"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo4"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>
                    </div>



                    <div class="section group">



                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description5"></a></h4>
                            <a href="preview.html" id="image_redirect5"><img src="" alt="" id="image5"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price5"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price5"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo5"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>

                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description6"></a></h4>
                            <a href="preview.html" id="image_redirect6"><img src="" alt="" id="image6"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price6"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price6"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo6"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>

                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description7"></a></h4>
                            <a href="preview.html" id="image_redirect7"><img src="" alt="" id="image7"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price7"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price7"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo7"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>

                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description8"></a></h4>
                            <a href="preview.html" id="image_redirect8"><img src="" alt="" id="image8"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price8"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price8"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo8"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>

                    </div>
                    <div class="section group">

                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description9"></a></h4>
                            <a href="preview.html" id="image_redirect9"><img src="" alt="" id="image9"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price9"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price9"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo9"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>


                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description10"></a></h4>
                            <a href="preview.html" id="image_redirect10"><img src="" alt="" id="image10"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price10"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price10"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo10"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>

                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description11"></a></h4>
                            <a href="preview.html" id="image_redirect11"><img src="" alt="" id="image11"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price11"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price11"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo11"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>

                        <div class="grid_1_of_4 images_1_of_4">
                            <h4><a href="preview.html" id="description12"></a></h4>
                            <a href="preview.html" id="image_redirect12"><img src="" alt="" id="image12"/></a>
                            <div class="price-details">
                                <div class="price-number">
                                    <p id="orig_price12"><span class="rupees"><del></del></span></p>
                                </div>
                                <div class="price-number">
                                    <p id="disc_price12"><span class="rupees"></span></p>
                                </div>
                                <h2 id="moreinfo12"></h2>

                                <div class="clear"></div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="clear"></div>
            </div>
        </div>
    </div>
</div>
<div class="footer">
    <div class="wrap">
        <div class="copy_right">
            <p>Copy rights (c). All rights Reseverd | Template by <a href="http://w3layouts.com" target="_blank">W3Layouts</a>
            </p>
        </div>
        <div class="footer-nav">
            <ul>
                <li><a href="#">Terms of Use</a> :</li>
                <li><a href="#">Privacy Policy</a> :</li>
                <li><a href="contact.html">Contact Us</a> :</li>
                <li><a href="#">Sitemap</a></li>
            </ul>
        </div>
    </div>
</div>
<a href="#" id="toTop"> </a>
<script type="text/javascript" src="js/navigation.js"></script>

<script type="text/javascript">

    function loadTopDeals() {

        //$("description1").html("abc");
        //document.getElementById("orig_price1").innerHTML = "<del>$199.99</del>";
        // document.getElementById("disc_price1").innerHTML = "$129.99";
        // document.getElementById("description1").src = "http://www.criteo.com/";
        // document.getElementById("description1").innerHTML = "Black Dress";
        //document.getElementById("image1").src = "images/dress1.jpg";

    };

</script>
</body>
</html>

